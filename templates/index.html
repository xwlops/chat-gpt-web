<!DOCTYPE html>
<html lang="en">
<body>
        <div>
            <form>
              <input type="text" id="edit_openaikey" placeholder="è¯·åœ¨æ­¤è¾“å…¥ç§˜é’¥,æ²¡æœ‰ç§˜é’¥åˆ™æ¯å¤©é™é¢10æ¬¡" style="width: 50vw;">
            </form>
          </div>
        {% if message %} {{ message }} {% endif %}
            {% if question %}
            <div class="loading" id="loading" style="display: none;">æ­£åœ¨æ¢³ç†ç­”æ¡ˆï¼Œè¯·ç¨ç­‰...</div>
            <div class="question">
                <b> ğŸ™‹â€â™‚ï¸ :</b> {{ question }}
            </div>
            <div class="res">
                <b> ğŸ‘¨â€ğŸ’» :</b> {{ res }}
            </div>
            {% endif %}
            <div class="chat-box">
                <form method="post" id="chat-form" onsubmit="submitForm()">
                    <input type="submit" value="æäº¤" id="submit"style="width:60%; color: white; background-color: #3079c3; text-align:center; margin-top: 10px; padding: 10px 0;" />
                </form>
        </div>
    </div>
</body>
<script>
    function submitForm() {
        let openaikey = document.getElementById('edit_openaikey').value;
        let loading = document.getElementById('loading');
        let form = document.querySelector('form');
        let formData = new FormData(form);
        loading.style.display = 'block';
        if (openaikey) {
            formData.append('openaikey', openaikey);
        }
        let xhr = new XMLHttpRequest();
        xhr.open('POST', '/');
        xhr.send(formData);
    }
</script>
</html>